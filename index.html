<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Primary Meta Tags -->
    <title>Dhani</title>
    <link rel="icon" href="https://www.dhani.com/wp-content/uploads/2020/10/cropped-dhani-logo2-32x32.png"
        sizes="32x32" />
    <link rel="icon" href="https://www.dhani.com/wp-content/uploads/2020/10/cropped-dhani-logo2-192x192.png"
        sizes="192x192" />
    <link rel="apple-touch-icon"
        href="https://www.dhani.com/wp-content/uploads/2020/10/cropped-dhani-logo2-180x180.png" />
    <meta name="title" content="Hey there, I have sent you gifts this Festive Season!">
    <meta name="description"
        content="Let's begin this new year with Prosperity, Health, Wealth & Positivity!. Here are some gifts for you. Merry Christmas and a Happy New Year 2021">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elated-khorana-f616b5.netlify.app/">
    <meta property="og:title" content="Hey there, I have sent you gifts this Festive Season!">
    <meta property="og:description"
        content="Let's begin this new year with Prosperity, Health, Wealth & Positivity!. Here are some gifts for you. Merry Christmas and a Happy New Year 2021">
    <meta property="og:image" content="">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://elated-khorana-f616b5.netlify.app/">
    <meta property="twitter:title" content="Hey there, I have sent you gifts this Festive Season!">
    <meta property="twitter:description"
        content="Let's begin this new year with Prosperity, Health, Wealth & Positivity!. Here are some gifts for you. Merry Christmas and a Happy New Year 2021">
    <meta property="twitter:image" content="">
</head>
<!-- CSS only -->
    <style>
        #bg {
            position: relative;
            display: inline-block;
        }
        
        #bg>video {
            width: auto;
            position: absolute;
            height: 100%;
        }
        
        #main {
            display: inline-block;
            position:relative;
        }
        
        .giftbag {
            float: left;
            width: 25%;
            position: relative;
        }
        
        #gifts {
            display: inline-block;
            width: 100%;
        }
        
        .wishing {
            width: 100%;
            display: inline-block;
            position: absolute;
            left: 0;
            top: 50%;
        }
        
        div#senderBox {
            position: absolute;
            top: 62%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        #senderName {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -60%);
                font-size: 23px;
        }
        
        img.wishCard {
            position: absolute;
            width: 20px;
            height: auto;
            top: 50%;
            left: 50%;
            z-index: 1;
            display: inline-block;
            opacity: 0;
            transition: 1.5s cubic-bezier(0.49, 0.26, 0.52, 1.22);
        }
        
        img.wishCard.show1 {
                opacity: 1;
                width: 275px;
                left: 130px;
                top: -310px;
        }
        
                img.wishCard.show2 {
                opacity: 1;
                width: 275px;
                left: 0px;
                top: -310px;
        }
        
                img.wishCard.show3 {
                opacity: 1;
                width: 275px;
                left: -135px;
                top: -310px;
        }
        
                img.wishCard.show4 {
                opacity: 1;
                width: 275px;
                left: -265px;
                top: -310px;
        }
        
        .gb {
            width: 100%;
        }
    </style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<body>
    
    <audio src="audio/audio.mp3" id="my_audio" loop="loop" autoplay="autoplay"></audio>
    <section id="main">
    <div>
        <div style="z-index:1000000; pointer-events: none;" id="snow"></div>
        <div id="bg">
        <video id="myVideo" muted autoplay>
            <source id="mp4_src" src="videos/intro.mp4" type="video/mp4">
        </video>
            <div id="senderBox" style="display:none;">
                <div style="position:relative">
                <img src="images/name_bg_03.png" style="width: 350px;">
                <span id="senderName">Dummy Text</span>
                </div>
            </div>

        <img src="images/New.png" alt="Background" class="bg">
        </div>
    </div>
        <section id="wishScreen" class="wishing" style="display:none">
        <div id="gifts">
                <div onclick="openGift(this)" class="giftbag" >
                    <img class="gb" data-open="images/open.png" data-close="images/potli.png" src="images/potli.png" alt="">
                    <img id="wishCard1" class="wishCard" src="images/1.png">
                </div>
                <div onclick="openGift(this)" class="giftbag" >
                    <img class="gb" data-open="images/open.png" data-close="images/potli.png" src="images/potli.png" alt="">
                    <img id="wishCard2" class="wishCard" src="images/2.png">
                </div>
                <div onclick="openGift(this)" class="giftbag" >
                    <img class="gb" data-open="images/open.png" data-close="images/potli.png" src="images/potli.png" alt="">
                    <img id="wishCard3" class="wishCard" src="images/3.png">
                </div>
                <div onclick="openGift(this)" class="giftbag" >
                    <img class="gb" data-open="images/open.png" data-close="images/potli.png" src="images/potli.png" alt="">
                    <img id="wishCard4" class="wishCard" src="images/4.png">
                </div>
        </div>
        <div id="share2WaBtn" class="container-fluid">
            <div class="row">
                <div class="col-md-12 text-center">
                    <p id="name" class="christmas"></p>
                    <input type="text" name="content" id="content" class="content" />
                    <button type="submit" onclick="addname();">Share it on Whatsapp</button>
                </div>
            </div>
        </div>
    </section>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        window.onload = (event) => {
            var senderName = window.location.search;
            senderName = senderName.slice(3, senderName.length);
            // document.getElementById("name").innerHTML = "<span>" + senderName + "</span><br> Wishes you a Merry Christmas and a Happy New year 2021!";
            document.getElementById("name").innerHTML = "<span>" + senderName + "</span>";
            document.getElementById("senderName").innerText = senderName;
            playVid();
        };
        var x = document.getElementById("myVideo");
        var y = document.getElementById('mp4_src');
        function playVid() {
            x.play();
            
            setTimeout(function(){
                myHandler();
                unfade(document.getElementById("senderBox"));
                }, 2750);
        }
//         x.addEventListener('ended', myHandler, false);
        function myHandler() {
            x.addEventListener("click", function () {
                document.getElementById("my_audio").play();
                y.setAttribute('src', "videos/GIF2.mp4");
                x.load();
                fade(document.getElementById("senderBox"));
                setTimeout(function(){
                    fade(x);
                    unfade(document.getElementById("wishScreen"));
                }, 4000);
            });
            
        }
        function fade(element, time=50) {
            var op = 1;  // initial opacity
            var timer = setInterval(function () {
                if (op <= 0.1) {
                    clearInterval(timer);
                    element.style.display = 'none';
                }
                element.style.opacity = op;
                element.style.filter = 'alpha(opacity=' + op * 100 + ")";
                op -= op * 0.1;
            }, time);
        }
        function unfade(element, time=50) {
            var op = 0.1;  // initial opacity
            element.style.display = 'block';
            var timer = setInterval(function () {
                if (op >= 1) {
                    clearInterval(timer);
                }
                element.style.opacity = op;
                element.style.filter = 'alpha(opacity=' + op * 100 + ")";
                op += op * 0.1;
            }, time);
        }
        function addname() {
            var name = document.getElementById('content');
            factionName = name.value;
            var message = " Hey there," + factionName + " has sent you gifts this Festive Season!";
            var whatsapp = "whatsapp://send?text=" + message + " https://dhanigreetings.netlify.app/?q=" + factionName;

            window.open(whatsapp);
        }
        
        function openGift(el,id) {
            var giftbags = document.getElementsByClassName("giftbag");
            var gb,gcard;
            for(var i=0; i<giftbags.length; i++){
                gb = giftbags[i].firstElementChild;
                gcard = giftbags[i].querySelector(".wishCard")
                
                gb.src = gb.dataset.close;
                gcard.classList.remove("show"+(i+1));
                
                if(gb == el) {
                    gb.src = gb.dataset.open;
                    gcard.classList.add("show"+(i+1));
                }
            }
//             el.src = el.dataset.open;
//             document.getElementById("wishCard"+id).classList.add("show"+id);
        }


        // $.fn.christmas = function() {
        //     $(this).each(function() {
        //         $(this).html($(this).text().split("").map(function(v, i) {
        //         return '<span class="christmas-' + (i % 2 == 0 ? 'gold' : 'blue') + '">' + v + '</span>';
        //         }).join(""));
        //     });
        // };

        // $(function() { 
        //     $('p.christmas').christmas();
        // });
    </script>
   </section>
</body>

</html>
